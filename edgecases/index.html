<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge Cases Soirée</title>
    
    <meta name="description" content="Join Promontory AI for Edge Cases—a curated soirée in Washington, DC for those breaking AI, pushing boundaries, and shaping the future of artificial intelligence through off-record conversations and thoughtful networking.">
    <meta name="keywords" content="AI event, Washington DC, AI networking, artificial intelligence, edge cases, Promontory AI, AI happy hour, AI community, AI innovation">
    
    <link rel="icon" type="image/png" href="favicon_p.png">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@200;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            min-height: 100vh;
            background: #000000;
            color: white;
            font-family: 'IBM Plex Sans', sans-serif;
            font-weight: 200;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            padding: 20px;
            font-size: 2vw;
            font-weight: 200;
            align-self: flex-start;
        }

        .header-link {
            color: inherit;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* Main Content */
        .main-content {
            position: relative;
            z-index: 1;
            min-height: calc(100vh - 160px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            text-align: center;
        }
        
        .event-title {
            font-size: clamp(3rem, 6vw, 6rem);
            font-weight: 200;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #ffffff, #888888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .tagline {
            font-size: clamp(1.2rem, 1.8vw, 1.8rem);
            font-weight: 200;
            margin-bottom: 1.5rem;
            opacity: 0.9;
            max-width: 85%;
        }
        
        .subtitle {
            font-size: clamp(1rem, 1.3vw, 1.4rem);
            font-weight: 200;
            margin-bottom: 2rem;
            opacity: 0.8;
            max-width: 70%;
            line-height: 1.5;
            text-align: center;
        }
        
        .event-details {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            max-width: 600px;
            width: 100%;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: clamp(1rem, 1.3vw, 1.3rem);
        }
        
        .detail-label {
            font-weight: 400;
            opacity: 0.8;
        }
        
        .detail-value {
            font-weight: 200;
            text-align: right;
        }
        
        .rsvp-button {
            background: linear-gradient(135deg, #333333, #666666);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
            font-weight: 400;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'IBM Plex Sans', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .rsvp-button:hover {
            background: linear-gradient(135deg, #555555, #888888);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            font-size: 1.5vw;
            font-weight: 200;
            position: fixed;
            bottom: 2vh;
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            overflow-y: auto;
            padding: 20px;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: rgba(10, 10, 10, 0.98);
            margin: auto;
            padding: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            width: 100%;
            max-width: 450px;
            position: relative;
            backdrop-filter: blur(20px);
            max-height: none;
            overflow: visible;
            font-family: 'IBM Plex Sans', sans-serif;
            font-weight: 100;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .close:hover {
            color: white;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 200;
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-family: 'IBM Plex Sans', sans-serif;
            font-size: 0.9rem;
            font-weight: 100;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Custom Select Dropdown */
        .custom-select {
            position: relative;
            width: 100%;
        }
        
        .select-display {
            width: 100%;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: white;
            font-family: 'IBM Plex Sans', sans-serif;
            font-size: 0.9rem;
            font-weight: 200;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .select-display:hover {
            border-color: rgba(255, 255, 255, 0.25);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .select-display.active {
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }
        
        .select-arrow {
            transition: transform 0.3s ease;
            opacity: 0.7;
            font-size: 0.9rem;
            margin-left: 8px;
            font-weight: 300;
        }
        
        .select-display.active .select-arrow {
            transform: rotate(180deg);
        }
        
        .select-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(15, 15, 15, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            margin-top: 4px;
            max-height: 280px;
            overflow-y: auto;
            overflow-x: hidden;
            display: none;
            z-index: 1002;
            backdrop-filter: blur(20px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        }
        
        .select-option {
            padding: 0.9rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.88rem;
            font-weight: 200;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            line-height: 1.4;
            word-wrap: break-word;
            position: relative;
        }
        
        .select-option:last-child {
            border-bottom: none;
        }
        
        .select-option:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .select-option.selected {
            background: rgba(255, 255, 255, 0.12);
            color: #ffffff;
            border-left: 3px solid rgba(255, 255, 255, 0.4);
            padding-left: 0.8rem;
        }
        
        .placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #333333, #666666);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 200;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-family: 'IBM Plex Sans', sans-serif;
            transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
            background: linear-gradient(135deg, #555555, #888888);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .success-message h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: #ffffff;
            font-weight: 200;
        }
        
        .success-message p {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }
        
        .return-link {
            display: inline-block;
            background: linear-gradient(135deg, #333333, #666666);
            color: white;
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-family: 'IBM Plex Sans', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .return-link:hover {
            background: linear-gradient(135deg, #555555, #888888);
            transform: translateY(-1px);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                font-size: 4vw;
            }

            .footer {
                font-size: 3vw;
            }
            
            .event-title {
                font-size: 12vw;
            }
            
            .tagline {
                font-size: 4vw;
            }
            
            .subtitle {
                font-size: 3vw;
            }
            
            .event-details {
                padding: 2rem;
            }
            
            .detail-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
                font-size: 1rem;
            }
            
            .modal-content {
                padding: 2rem;
                margin: 10px auto;
            }
            
            .modal {
                padding: 10px;
                align-items: flex-start;
                padding-top: 10vh;
            }
            
            .select-options {
                max-height: 180px;
                position: absolute;
                left: 0;
                right: 0;
                width: auto;
                max-width: none;
                z-index: 1002;
            }
            
            .select-option {
                padding: 0.8rem 1rem;
                font-size: 0.9rem;
                font-weight: 200;
                line-height: 1.4;
            }
        }
    </style>
</head>
<body>
    <div class="header"><a href="https://promontoryai.com" class="header-link">Promontory AI</a></div>
    
    <div class="main-content">
        <h1 class="event-title">Edge Cases</h1>
        <p class="tagline">A soirée for those working seriously and semi-seriously on artificial intelligence</p>
        
        <div class="subtitle">
            We are the ones who break AI, pretend to understand it, worry about what it will do, launch with fingers crossed, and clean up after the demo. We gather here to talk about failures, foresight, and unfinished thoughts—over cocktails thoughtfully crafted to spark conversation.
        </div>
        
        <div class="event-details">
            <div class="detail-item">
                <span class="detail-label">Date:</span>
                <span class="detail-value">Wednesday, June 25th, 2025</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Time:</span>
                <span class="detail-value">6:00 PM - 9:00 PM</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Location:</span>
                <span class="detail-value">[VENUE TBD]</span>
            </div>
        </div>
        
        <button class="rsvp-button" onclick="openModal()">RSVP Now</button>
    </div>
    
    <div class="footer">
        ask@promontoryai.com
    </div>

    <!-- RSVP Modal -->
    <div id="rsvpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            
            <div id="rsvpForm">
                <h2 style="margin-bottom: 1.5rem; font-weight: 200; font-size: 1.4rem;">Reserve Your Spot</h2>
                
                <form onsubmit="submitRSVPWithValidation(event)" id="rsvpFormElement">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" required placeholder="Your full name">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required placeholder="your@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="company">Company/Organization</label>
                        <input type="text" id="company" name="company" placeholder="Where you work or study">
                    </div>
                    
                    <div class="form-group">
                        <label for="role">Your Role *</label>
                        <div class="custom-select">
                            <div class="select-display" onclick="toggleSelect()" tabindex="0">
                                <span class="select-text placeholder">Select your primary role</span>
                                <span class="select-arrow">▼</span>
                            </div>
                            <div class="select-options">
                                <div class="select-option" data-value="The Architect" tabindex="0">The Architect - I design and build AI systems</div>
                                <div class="select-option" data-value="The Operator" tabindex="0">The Operator - I apply and operate AI in real-world systems</div>
                                <div class="select-option" data-value="The Anomaly" tabindex="0">The Anomaly - I test, probe, and challenge AI systems</div>
                                <div class="select-option" data-value="The Oracle" tabindex="0">The Oracle - I shape the rules AI must follow</div>
                                <div class="select-option" data-value="The Interpreter" tabindex="0">The Interpreter - I translate AI for people and society</div>
                            </div>
                        </div>
                        <input type="hidden" id="role" name="role" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="edge">What's your edge? (Optional)</label>
                        <input type="text" id="edge" name="edge" placeholder="One sentence about what makes you an edge case">
                    </div>
                    
                    <button type="submit" class="submit-btn">Submit RSVP</button>
                </form>
            </div>
            
            <div id="successMessage" class="success-message">
                <h3>Welcome to Edge Cases Soirée</h3>
                <p>Thank you for your RSVP. We're looking forward to seeing you there.</p>
                <p style="font-size: 0.9rem; opacity: 0.7;">Check your email for confirmation details and calendar invite.</p>
                <a href="https://promontoryai.com" class="return-link">Visit Promontory AI</a>
            </div>
        </div>
    </div>

    <script>
        let selectedRole = '';
        
        function openModal() {
            // Wake up the Render server
            fetch('https://rsvp-server-f7wb.onrender.com', {
                method: 'GET',
            }).catch(err => {
                // Ignore errors - this is just to wake up the server
                console.log('Server wake-up ping failed, but that\'s okay');
            });
            
            const modal = document.getElementById('rsvpModal');
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Focus on the name field when modal opens
            document.getElementById('name').focus();
        }
        
        function closeModal() {
            document.getElementById('rsvpModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            // Reset form when closing
            resetForm();
        }
        
        function resetForm() {
            // Reset the form
            document.getElementById('rsvpFormElement').reset();
            
            // Reset custom select
            const selectDisplay = document.querySelector('.select-display');
            const selectText = document.querySelector('.select-text');
            selectDisplay.classList.remove('active');
            selectText.textContent = 'Select your primary role';
            selectText.className = 'select-text placeholder';
            
            // Clear selected options
            document.querySelectorAll('.select-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Reset variables
            selectedRole = '';
            document.getElementById('role').value = '';
            
            // Reset views
            document.getElementById('rsvpForm').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
        }
        
        function toggleSelect() {
            const selectDisplay = document.querySelector('.select-display');
            const selectOptions = document.querySelector('.select-options');
            
            selectDisplay.classList.toggle('active');
            
            if (selectDisplay.classList.contains('active')) {
                selectOptions.style.display = 'block';
                // Force reflow to ensure visibility
                selectOptions.offsetHeight;
            } else {
                selectOptions.style.display = 'none';
            }
        }
        
        // Handle option selection
        document.querySelectorAll('.select-option').forEach(option => {
            option.addEventListener('click', function() {
                selectedRole = this.getAttribute('data-value');
                const selectText = document.querySelector('.select-text');
                const selectDisplay = document.querySelector('.select-display');
                const selectOptions = document.querySelector('.select-options');
                
                selectText.textContent = selectedRole;
                selectText.className = 'select-text';
                document.getElementById('role').value = selectedRole;
                
                // Remove active state and hide options
                selectDisplay.classList.remove('active');
                selectOptions.style.display = 'none';
                
                // Update selected state
                document.querySelectorAll('.select-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
            
            option.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
        
        // Add keyboard support for select display
        document.querySelector('.select-display').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleSelect();
            }
        });
        
        // Close select when clicking outside
        document.addEventListener('click', function(event) {
            const customSelect = document.querySelector('.custom-select');
            if (!customSelect.contains(event.target)) {
                const selectDisplay = document.querySelector('.select-display');
                const selectOptions = document.querySelector('.select-options');
                selectDisplay.classList.remove('active');
                selectOptions.style.display = 'none';
            }
        });
        
        // REMOVED: Modal closing when clicking outside
        // The window.onclick function has been removed to prevent closing modal on outside click
        
        function submitRSVP(event) {
            event.preventDefault();
            
            // Get form data
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            
            // Show loading state
            const submitBtn = event.target.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            
            // Send to backend - FIXED: Added /rsvp endpoint
            fetch('https://rsvp-server-f7wb.onrender.com/rsvp', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                // Check if response is ok
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(result => {
                console.log('Server response:', result); // For debugging
                
                if (result.success) {
                    // Show success message
                    document.getElementById('rsvpForm').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Clear form after successful submission
                    resetForm();
                } else {
                    throw new Error(result.error || 'Something went wrong');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                
                // More specific error messages
                let errorMessage = 'Failed to submit RSVP. Please try again or contact edgecases@promontoryai.com';
                
                if (error.message.includes('Failed to fetch')) {
                    errorMessage = 'Network error. Please check your connection and try again.';
                } else if (error.message.includes('HTTP error')) {
                    errorMessage = 'Server error. Please try again in a few minutes.';
                } else if (error.message.includes('Missing required fields')) {
                    errorMessage = 'Please fill in all required fields.';
                }
                
                alert(errorMessage);
                
                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            });
        }
        
        // Optional: Add form validation before submission
        function validateForm(formData) {
            const required = ['name', 'email', 'role'];
            const missing = required.filter(field => !formData[field] || formData[field].trim() === '');
            
            if (missing.length > 0) {
                alert(`Please fill in the following required fields: ${missing.join(', ')}`);
                return false;
            }
            
            // Basic email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(formData.email)) {
                alert('Please enter a valid email address.');
                return false;
            }
            
            return true;
        }
        
        // Enhanced version with validation
        function submitRSVPWithValidation(event) {
            event.preventDefault();
            
            // Get form data
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            
            // Validate form data
            if (!validateForm(data)) {
                return;
            }
            
            // Show loading state
            const submitBtn = event.target.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            
            // Send to backend
            fetch('https://rsvp-server-f7wb.onrender.com/rsvp', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(result => {
                console.log('Server response:', result);
                
                if (result.success) {
                    // Show success message
                    document.getElementById('rsvpForm').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Clear form after successful submission (but keep success message visible)
                    document.getElementById('rsvpFormElement').reset();
                    selectedRole = '';
                    document.getElementById('role').value = '';
                    
                    // Reset custom select display
                    const selectDisplay = document.querySelector('.select-display');
                    const selectText = document.querySelector('.select-text');
                    selectDisplay.classList.remove('active');
                    selectText.textContent = 'Select your primary role';
                    selectText.className = 'select-text placeholder';
                    
                    // Clear selected options
                    document.querySelectorAll('.select-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                } else {
                    throw new Error(result.error || 'Something went wrong');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                
                let errorMessage = 'Failed to submit RSVP. Please try again or contact edgecases@promontoryai.com';
                
                if (error.message.includes('Failed to fetch')) {
                    errorMessage = 'Network error. Please check your connection and try again.';
                } else if (error.message.includes('HTTP error! status: 500')) {
                    errorMessage = 'Server error. Our team has been notified. Please try again in a few minutes.';
                } else if (error.message.includes('HTTP error! status: 400')) {
                    errorMessage = 'Please check your form data and try again.';
                }
                
                alert(errorMessage);
                
                // Reset button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            });
        }
    </script>
</body>
</html>
